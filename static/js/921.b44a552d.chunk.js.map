{"version":3,"file":"static/js/921.b44a552d.chunk.js","mappings":"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","sources":["pages/ai-gen/repo.js","pages/ai-gen/index.js","utils/format.js","../node_modules/.pnpm/rc-util@5.38.0_react-dom@18.2.0+react@18.2.0/node_modules/rc-util/es/Dom/addEventListener.js","../node_modules/.pnpm/rc-util@5.38.0_react-dom@18.2.0+react@18.2.0/node_modules/rc-util/es/Dom/css.js"],"sourcesContent":["import { getUserToken } from \"../../utils/user\";\n\nexport async function genImage(prompt) {\n  const result = await postWithAuth(\"https://api.zymx.tech/gpt/gen-image\", {\n    prompt: prompt,\n  });\n  return await result.json();\n}\n\nasync function postWithAuth(url, bodyJson) {\n  var encodedData = Object.keys(bodyJson)\n    .map(function (key) {\n      return encodeURIComponent(key) + \"=\" + encodeURIComponent(bodyJson[key]);\n    })\n    .join(\"&\");\n  return await fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      Authorization: getUserToken(),\n    },\n    body: encodedData,\n  });\n}\n","import { Input, Image, Button, Spin } from \"antd\";\nimport { useState } from \"react\";\nimport { genImage } from \"./repo\";\nimport { timeFormat } from \"../../utils/format\";\nimport { useLoginModalSwitch, useUserData } from \"../../utils/user\";\n\nexport default function AIGen() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [prompt, setPrompt] = useState(\"\");\n  const [openLoginModal] = useLoginModalSwitch();\n  const userData = useUserData();\n  const [imageResults, setImageResults] = useState([]);\n\n  const onGenImage = () => {\n    if (!userData.token) {\n      openLoginModal();\n      return;\n    }\n    setIsLoading(true);\n    genImage(prompt)\n      .then((resp) => {\n        if (resp.code === 0) {\n          setImageResults([resp.data, ...imageResults]);\n        }\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  };\n\n  return (\n    <div className=\"p-4 space-y-4 pb-24\">\n      <div className=\"text-base font-bold\">Prompt:</div>\n      <Input.TextArea\n        rows={3}\n        value={prompt}\n        placeholder=\"Input your prompt here. You have to input 20 characters at least. \"\n        onChange={(e) => setPrompt(e.target.value)}\n        disabled={isLoading}\n      />\n      <Button\n        type=\"primary\"\n        loading={isLoading}\n        onClick={onGenImage}\n        disabled={prompt.length < 20}\n      >\n        Gen!\n      </Button>\n      <div className=\"text-base font-bold\">Result:</div>\n      <div className=\"flex space-x-2\">\n        {isLoading && (\n          <div className=\"w-28 h-28 flex items-center justify-center bg-white bg-opacity-70 rounded-lg\">\n            <Spin />\n          </div>\n        )}\n        {imageResults.map((item) => {\n          const imageInfo = item.data[0];\n          const url = imageInfo.url;\n          return (\n            <div className=\"w-28 h-28 rounded-lg\" key={url}>\n              <Image src={url} />\n            </div>\n          );\n        })}\n      </div>\n\n      <div>\n        {imageResults.map((item) => {\n          const imageInfo = item.data[0];\n          const url = imageInfo.url;\n          return (\n            <div key={url} className=\"bg-white bg-opacity-90 rounded-lg p-4\">\n              <div className=\"font-bold mb-2\">{timeFormat(item.created)}</div>\n              <div className=\"mb-2 bg-gray-300 rounded-lg p-2 bg-opacity-50\">\n                {imageInfo.revised_prompt}\n              </div>\n              <img\n                src={url}\n                alt={imageInfo.revised_prompt}\n                className=\"w-full h-full\"\n              />\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","export function timeFormat(timestamp) {\n  const date = new Date(timestamp * 1000);\n\n  const formattedDate = `${date.getFullYear()}-${(date.getMonth() + 1)\n    .toString()\n    .padStart(2, \"0\")}-${date.getDate().toString().padStart(2, \"0\")} ${date\n    .getHours()\n    .toString()\n    .padStart(2, \"0\")}:${date.getMinutes().toString().padStart(2, \"0\")}:${date\n    .getSeconds()\n    .toString()\n    .padStart(2, \"0\")}`;\n  return formattedDate;\n}\n","import ReactDOM from 'react-dom';\nexport default function addEventListenerWrap(target, eventType, cb, option) {\n  /* eslint camelcase: 2 */\n  var callback = ReactDOM.unstable_batchedUpdates ? function run(e) {\n    ReactDOM.unstable_batchedUpdates(cb, e);\n  } : cb;\n  if (target !== null && target !== void 0 && target.addEventListener) {\n    target.addEventListener(eventType, callback, option);\n  }\n  return {\n    remove: function remove() {\n      if (target !== null && target !== void 0 && target.removeEventListener) {\n        target.removeEventListener(eventType, callback, option);\n      }\n    }\n  };\n}","/* eslint-disable no-nested-ternary */\nvar PIXEL_PATTERN = /margin|padding|width|height|max|min|offset/;\nvar removePixel = {\n  left: true,\n  top: true\n};\nvar floatMap = {\n  cssFloat: 1,\n  styleFloat: 1,\n  float: 1\n};\nfunction getComputedStyle(node) {\n  return node.nodeType === 1 ? node.ownerDocument.defaultView.getComputedStyle(node, null) : {};\n}\nfunction getStyleValue(node, type, value) {\n  type = type.toLowerCase();\n  if (value === 'auto') {\n    if (type === 'height') {\n      return node.offsetHeight;\n    }\n    if (type === 'width') {\n      return node.offsetWidth;\n    }\n  }\n  if (!(type in removePixel)) {\n    removePixel[type] = PIXEL_PATTERN.test(type);\n  }\n  return removePixel[type] ? parseFloat(value) || 0 : value;\n}\nexport function get(node, name) {\n  var length = arguments.length;\n  var style = getComputedStyle(node);\n  name = floatMap[name] ? 'cssFloat' in node.style ? 'cssFloat' : 'styleFloat' : name;\n  return length === 1 ? style : getStyleValue(node, name, style[name] || node.style[name]);\n}\nexport function set(node, name, value) {\n  var length = arguments.length;\n  name = floatMap[name] ? 'cssFloat' in node.style ? 'cssFloat' : 'styleFloat' : name;\n  if (length === 3) {\n    if (typeof value === 'number' && PIXEL_PATTERN.test(name)) {\n      value = \"\".concat(value, \"px\");\n    }\n    node.style[name] = value; // Number\n    return value;\n  }\n  for (var x in name) {\n    if (name.hasOwnProperty(x)) {\n      set(node, x, name[x]);\n    }\n  }\n  return getComputedStyle(node);\n}\nexport function getOuterWidth(el) {\n  if (el === document.body) {\n    return document.documentElement.clientWidth;\n  }\n  return el.offsetWidth;\n}\nexport function getOuterHeight(el) {\n  if (el === document.body) {\n    return window.innerHeight || document.documentElement.clientHeight;\n  }\n  return el.offsetHeight;\n}\nexport function getDocSize() {\n  var width = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth);\n  var height = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\n  return {\n    width: width,\n    height: height\n  };\n}\nexport function getClientSize() {\n  var width = document.documentElement.clientWidth;\n  var height = window.innerHeight || document.documentElement.clientHeight;\n  return {\n    width: width,\n    height: height\n  };\n}\nexport function getScroll() {\n  return {\n    scrollLeft: Math.max(document.documentElement.scrollLeft, document.body.scrollLeft),\n    scrollTop: Math.max(document.documentElement.scrollTop, document.body.scrollTop)\n  };\n}\nexport function getOffset(node) {\n  var box = node.getBoundingClientRect();\n  var docElem = document.documentElement;\n\n  // < ie8 不支持 win.pageXOffset, 则使用 docElem.scrollLeft\n  return {\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n  };\n}"],"names":["_genImage","_asyncToGenerator","_regeneratorRuntime","mark","_callee","prompt","result","wrap","_context","prev","next","postWithAuth","sent","json","abrupt","stop","apply","arguments","_x2","_x3","_postWithAuth","_callee2","url","bodyJson","encodedData","_context2","Object","keys","map","key","encodeURIComponent","join","fetch","method","headers","Authorization","getUserToken","body","AIGen","_useState","useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","setPrompt","_useLoginModalSwitch","useLoginModalSwitch","openLoginModal","userData","useUserData","_useState5","_useState6","imageResults","setImageResults","_jsxs","className","children","_jsx","Input","TextArea","rows","value","placeholder","onChange","e","target","disabled","Button","type","loading","onClick","token","_x","genImage","then","resp","code","data","concat","_toConsumableArray","finally","length","Spin","item","Image","src","imageInfo","timeFormat","created","revised_prompt","alt","timestamp","date","Date","getFullYear","getMonth","toString","padStart","getDate","getHours","getMinutes","getSeconds","addEventListenerWrap","eventType","cb","option","callback","ReactDOM","addEventListener","remove","removeEventListener","getClientSize","width","document","documentElement","clientWidth","height","window","innerHeight","clientHeight","getOffset","node","box","getBoundingClientRect","docElem","left","pageXOffset","scrollLeft","clientLeft","top","pageYOffset","scrollTop","clientTop"],"sourceRoot":""}